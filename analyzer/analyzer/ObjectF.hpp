#pragma once

// ObjectF command target

class ObjectF : public CObject
{
public:
	static BOOL ReadFileCustom(CObject * co, size_t n, CString fp)
{
	CFile theFile;
	if( theFile.Open(fp, /*CFile::modeCreate |*/ CFile::modeRead) ){
		CArchive archive(&theFile, CArchive::load);

		for(size_t i=0;i<n;i++){
			co[i].Serialize(archive);
		}

		archive.Close();
		theFile.Close();
		return TRUE;
	}
	return FALSE;
};


static BOOL WriteFileCustom(CObject * co, size_t n, CString fp)
{
	CFile theFile;
	if( theFile.Open(fp, CFile::modeCreate | CFile::modeWrite) ){
		CArchive archive(&theFile, CArchive::store);

		for(size_t i=0;i<n;i++){
			co[i].Serialize(archive);
		}

		archive.Close();
		theFile.Close();
		return TRUE;
	}
	return FALSE;
};

public:
	ObjectF(){};
	virtual ~ObjectF(){};
	BOOL WriteFile(CString fp)
	{
		return WriteFileCustom(this,1,fp);
	};
	BOOL ReadFile(CString fp)
	{
		return ReadFileCustom(this,1,fp);
	};


};


